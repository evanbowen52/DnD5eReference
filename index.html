<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 5e Reference</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">D&D 5e Reference</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#/spells">Spells</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/classes">Classes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/monsters">Monsters</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/races">Races</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/subraces">Subraces</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/equipment">Equipment</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/rules">Rules</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/rule-sections">Rule Sections</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/features">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/feats">Feats</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/conditions">Conditions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/damage-types">Damage Types</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/magic-schools">Magic Schools</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/proficiencies">Proficiencies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/skills">Skills</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/traits">Traits</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/weapon-properties">Weapon Properties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/ability-scores">Ability Scores</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/alignments">Alignments</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#/backgrounds">Backgrounds</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div id="sidebarContent"></div>
            </div>
            <div class="col-md-9">
                <div id="mainContent"></div>
            </div>
        </div>
    </div>

   <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="./api/client.js"></script>
    <script src="./router.js"></script>
    <!-- Page Scripts -->
    <script src="./pages/spells.js"></script>
    <script src="./pages/classes.js"></script>
    <script src="./pages/monsters.js"></script>
    <script src="./pages/races.js"></script>
    <script src="./pages/subraces.js"></script>
    <script src="./pages/equipment.js"></script>
    <script src="./pages/rules.js"></script>
    <script src="./pages/rule-sections.js"></script>
    <script src="./pages/features.js"></script>
    <script src="./pages/feats.js"></script>
    <script src="./pages/conditions.js"></script>
    <script src="./pages/damage-types.js"></script>
    <script src="./pages/magic-schools.js"></script>
    <script src="./pages/proficiencies.js"></script>
    <script src="./pages/skills.js"></script>
    <script src="./pages/traits.js"></script>
    <script src="./pages/weapon-properties.js"></script>
    <script src="./pages/ability-scores.js"></script>
    <script src="./pages/alignments.js"></script>
    <script src="./pages/backgrounds.js"></script>
    <script>
        // Initialize API
        window.api = new window.DnDAPI();
        
        // Initialize router and add routes
        window.router = new window.Router();
        
        // Add routes for all pages
        const routes = [
            { path: '/spells', method: 'loadSpells', detailMethod: 'loadSpellDetails' },
            { path: '/classes', method: 'loadClasses', detailMethod: 'loadClassDetails' },
            { path: '/monsters', method: 'loadMonsters', detailMethod: 'loadMonsterDetails' },
            { path: '/races', method: 'loadRaces', detailMethod: 'loadRaceDetails' },
            { path: '/subraces', method: 'loadSubraces', detailMethod: 'loadSubraceDetails' },
            { path: '/equipment', method: 'loadEquipment', detailMethod: 'loadEquipmentDetails' },
            { path: '/rules', method: 'loadRules', detailMethod: 'loadRuleDetails' },
            { path: '/rule-sections', method: 'loadRuleSections', detailMethod: 'loadRuleSectionDetails' },
            { path: '/features', method: 'loadFeatures', detailMethod: 'loadFeatureDetails' },
            { path: '/feats', method: 'loadFeats', detailMethod: 'loadFeatDetails' },
            { path: '/conditions', method: 'loadConditions', detailMethod: 'loadConditionDetails' },
            { path: '/damage-types', method: 'loadDamageTypes', detailMethod: 'loadDamageTypeDetails' },
            { path: '/magic-schools', method: 'loadMagicSchools', detailMethod: 'loadMagicSchoolDetails' },
            { path: '/proficiencies', method: 'loadProficiencies', detailMethod: 'loadProficiencyDetails' },
            { path: '/skills', method: 'loadSkills', detailMethod: 'loadSkillDetails' },
            { path: '/traits', method: 'loadTraits', detailMethod: 'loadTraitDetails' },
            { path: '/weapon-properties', method: 'loadWeaponProperties', detailMethod: 'loadWeaponPropertyDetails' },
            { path: '/ability-scores', method: 'loadAbilityScores', detailMethod: 'loadAbilityScoreDetails' },
            { path: '/alignments', method: 'loadAlignments', detailMethod: 'loadAlignmentDetails' },
            { path: '/backgrounds', method: 'loadBackgrounds', detailMethod: 'loadBackgroundDetails' }
        ];
    
        // Add routes
        routes.forEach(route => {
            // Add main page route
            window.router.addRoute(route.path, () => {
                const pageName = route.path.substring(1).replace(/-/g, '');
                const PageClass = window[pageName.charAt(0).toUpperCase() + pageName.slice(1) + 'Page'];
                const page = new PageClass();
                window.router[`current${pageName.charAt(0).toUpperCase() + pageName.slice(1)}Page`] = page;
                page[route.method]();
            });
    
            // Add detail route if detail method exists
            if (route.detailMethod) {
                window.router.addRoute(`${route.path}/:id`, (params) => {
                    const pageName = route.path.substring(1).replace(/-/g, '');
                    const page = window.router[`current${pageName.charAt(0).toUpperCase() + pageName.slice(1)}Page`];
                    if (page) {
                        page[route.detailMethod](params.id);
                    } else {
                        const PageClass = window[pageName.charAt(0).toUpperCase() + pageName.slice(1) + 'Page'];
                        const page = new PageClass();
                        window.router[`current${pageName.charAt(0).toUpperCase() + pageName.slice(1)}Page`] = page;
                        page[route.detailMethod](params.id);
                    }
                });
            }
        });
    
        // Initialize the route after adding all routes
        window.router.handleRoute();
        
        console.log('Pages initialized');
    </script>
</body>
</html>